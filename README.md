# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –°–∞—Ä—Ç–∏—Å–æ–Ω–∞ –ï–≤–≥–µ–Ω–∏—è ‚Ññ10


üöß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
## **(1) –í—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É –∏–∑ –°–£–ë–î**

‚Äî –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å ClickHouse, Greenplum, MongoDB, MySQL, Tarantool ‚Äî —á—Ç–æ —É–≥–æ–¥–Ω–æ, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—à—å –∏ —Å–º–æ–∂–µ—à—å —Å—Ä–∞–≤–Ω–∏—Ç—å —Å PostgreSQL.
**–†–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª–∫–µ Postgres –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ClickHouse**

**Postgres**
<img width="1288" height="311" alt="image" src="https://github.com/user-attachments/assets/893dcd69-9c87-44cb-a584-893a108f4776" />

**Clickhouse**

(a) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Clickhouse
```
apt-get install -y apt-transport-https ca-certificates dirmngr
apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 8919F6BD2B48D754
echo "deb https://packages.clickhouse.com/deb stable main" | sudo tee /etc/apt/sources.list.d/clickhouse.list
apt update
apt-get install -y clickhouse-server clickhouse-client
```

(–±) —Ä–∞–∑—Ä–µ—à–∞–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –Ω–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É:
```
student:~$ sudo diff /etc/clickhouse-server/config.xml /etc/clickhouse-server/config.xml_bkp
269c269
<     <listen_host>0.0.0.0</listen_host> 
---
>     <!-- <listen_host>0.0.0.0</listen_host> -->
```

(–≤) –ó–∞–ø—É—Å–∫ Clickhouse-–∞
> sudo systemctl start clickhouse-server





## **(2) –£–±–µ–¥–∏—Å—å, —á—Ç–æ –æ–±–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –≤ Minikube).**

**Postgres**
<img width="1399" height="387" alt="image" src="https://github.com/user-attachments/assets/ac57f205-1342-45e6-be86-63d73ead4919" />


**Clickhouse**

<img width="733" height="198" alt="image" src="https://github.com/user-attachments/assets/0ed5a72a-b0ac-4705-ba5d-8932312cd8c9" />


–î–ª—è —á–∏—Å—Ç–æ—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –æ—Å—Ç–∞–≤–ª—è—é –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ ClickHouse –∏ Postgres –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. 




## **(3)–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ –Ω–µ—ë –¥–∞–Ω–Ω—ã–µ**

‚Äî –û–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö: –æ—Ç 10 –¥–æ 100 –ì–± (–º–æ–∂–Ω–æ –≤–∑—è—Ç—å –¥–µ–º–æ-–Ω–∞–±–æ—Ä—ã –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ).

‚Äî –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞–≥—Ä—É–∑–∫–∏: COPY, INSERT, —Å—Ç—Ä–∏–º–∏–Ω–≥, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É, —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã.

**Postgres**

*(a)COPY*
–° –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [faker](https://faker.readthedocs.io/en/master/) —Å–≥–µ–Ω–µ–Ω–∏—Ä–æ–≤–∞–ª —Ç–µ—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ CSV

python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
```
student:~/otus$ cat generator_csv.py
import csv
import datetime
from faker import Faker

fake = Faker()
MAX_RANGE = 10000000

with open('otus_data_set_for_copy.csv', 'w') as csvfile:
    field_names = ['author', 'content']
    writer = csv.DictWriter(csvfile, fieldnames=field_names)
    writer.writeheader()
    for i in range(0, MAX_RANGE):
        writer.writerow({
            'author': fake.name(),
            'content': fake.sentence(nb_words=16, variable_nb_words=True),
        })
```

–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
```
student:~/otus$ python generator_csv.py
student:~/otus$ wc -l otus_data_set_for_copy.csv
10000001 otus_data_set_for_copy.csv
student:~/otus$ du -sh otus_data_set_for_copy.csv
1,1G	otus_data_set_for_copy.csv
```

—Å–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã, –∫—É–¥–∞ –±—É–¥–µ–º –≤—ã–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
```
student=# CREATE TABLE blog_feed (
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ingested_at timestamp DEFAULT CURRENT_TIMESTAMP,
    author text NOT NULL,
    content text NOT NULL
);
CREATE TABLE
```

–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```
student:~/otus$ time cat otus_data_set_for_copy.csv | psql -c "COPY blog_feed (author, content) FROM STDIN WITH (FORMAT CSV, HEADER TRUE);"
COPY 10000000

real	1m35,068s
user	0m0,926s
sys	0m2,412s

student=# select count(0) from blog_feed
student-# ;
  count   
----------
 10000000
(1 row)
```
–ó–∞–≥—Ä—É–∑–∏–ª–∏ 10–º —Å—Ç—Ä–æ–∫ –∑–∞ ~1.5 –º–∏–Ω—É—Ç—ã. 



*(b)INSERT*

–ò–∑  –∑–∞–¥–∞–Ω–∏—è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å INSERT. –Ø —Å–æ–∑–¥–∞–ª –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∂–µ —Å—É—â–µ—Å–≤—É—é—â–µ –≤ –±–∞–∑–µ
```
student=# 
create table blog_feed_insert
as 
select * from blog_feed where 1=2;
SELECT 0


tudent:~/otus$ time  psql -c "insert into blog_feed_insert select * from blog_feed;"
INSERT 0 10000000

real	0m51,661s
user	0m0,027s
sys	0m0,021s
```
–ü–æ–ª—É—á–∏–ª–æ—Å—å –æ–∫–æ–ª–æ 50 —Å–µ–∫—É–Ω–¥




*(c)–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫–∞*


Copy –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±–æ–≤–∞–ª –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–æ –æ–Ω–∏ –∂–¥—É—Ç –¥—Ä—É–≥-–¥—Ä—É–≥–∞. 

–ï—Å—Ç—å 2 —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è\—É—Ç–∏–ª–∏—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å, –Ω–æ —É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ. –ù–µ –±—ã–ª–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è.

–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é —á—Ç–æ —É—Ç–∏–ª–∏—Ç—ã –µ—Å—Ç—å 

timescaledb-parallel-copy - https://github.com/timescale/timescaledb-parallel-copy(—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è –≤–∞–Ω–∏–ª—å–Ω–æ–≥–æ –ø–æ—Å—Ç–≥—Ä–µ—Å–∞ —Ç–æ–∂–µ)

pg_bulkload - https://github.com/ossc-db/pg_bulkload#



*(d)—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã*

–ù–µ –±—É–¥—É –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å, –Ω–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ CSV –∏–ª–∏ Json —ç—Ç–æ —á–µ—Ä–µ–∑ PgAdmin. 



**Clickhouse**
–î–µ–π—Å—Ç–≤–æ–≤–∞–ª –ø–æ –º–∞–Ω—É–∞–ª—É  https://clickhouse.com/docs/integrations/data-formats/csv-tsv

–°–æ–∑–¥–∞–ª –ø—É—Å—Ç—É—é —Ç–∞–±–ª–∏—Ü—É
```
localhost :) 

CREATE TABLE blog_feed
(
    `id` UInt32,
    `ingested_at` Date,
    `author` String ,
^I`content` String 
)
ENGINE = MergeTree
ORDER BY tuple(id, ingested_at);

CREATE TABLE blog_feed
(
    `id` UInt32,
    `ingested_at` Date,
    `author` String,
    `content` String
)
ENGINE = MergeTree
ORDER BY (id, ingested_at)

Query id: 5ffd6115-851c-421b-89dd-88464d3c5135

Ok.

0 rows in set. Elapsed: 0.024 sec. 
```

–ü–æ–ø—ã—Ç–∞–ª—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–π–º–∞–ª –æ—à–∏–±–∫—É
```
student:~/otus$ time clickhouse-client --password password -q "INSERT INTO blog_feed FORMAT CSVWithNames" < pg.csv
Received exception from server (version 25.6.4):
Code: 241. DB::Exception: Received from localhost:9000. DB::Exception: (total) memory limit exceeded: would use 1.77 GiB (attempt to allocate chunk of 38.25 MiB bytes), current RSS: 1.16 GiB, maximum: 1.74 GiB. OvercommitTracker decision: Query was selected to stop by OvercommitTracker. (MEMORY_LIMIT_EXCEEDED)
(query: INSERT INTO blog_feed FORMAT CSVWithNames)

real	0m51,490s
user	0m5,460s
sys	0m2,983s

```

–†–∞–∑–±–∏–ª CSV —Ñ–∞–π–ª –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ —á–∞—Å—Ç–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
```
student:~/otus$ split -l 2000000 pg.csv new

student:~/otus$ time clickhouse-client --password password -q "INSERT INTO blog_feed FORMAT CSVWithNames" < newaa

real	0m3,814s
user	0m0,920s
sys	0m0,446s
student:~/otus$ time clickhouse-client --password password -q "INSERT INTO blog_feed FORMAT CSVWithNames" < newab

real	0m0,906s
user	0m0,427s
sys	0m0,184s
student:~/otus$ time clickhouse-client --password password -q "INSERT INTO blog_feed FORMAT CSVWithNames" < newac

real	0m1,202s
user	0m0,532s
sys	0m0,191s
student:~/otus$ time clickhouse-client --password password -q "INSERT INTO blog_feed FORMAT CSVWithNames" < newad

real	0m0,791s
user	0m0,462s
sys	0m0,125s
student:~/otus$ time clickhouse-client --password password -q "INSERT INTO blog_feed FORMAT CSVWithNames" < newae

real	0m0,961s
user	0m0,467s
sys	0m0,204s

localhost :) select count(0) from blog_feed;

SELECT count(0)
FROM blog_feed

Query id: c0f0f7a8-67e9-4cb3-bb40-7a7b7d0d7200

   ‚îå‚îÄcount(0)‚îÄ‚îê
1. ‚îÇ  9999995 ‚îÇ -- 10.00 million
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1 row in set. Elapsed: 0.019 sec. 

```
–ó–∞–≥—Ä—É–∑–∫–∞ –≤ ClickHouse –ø—Ä–æ—à–ª–∞ –≤ ~10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ —á–µ–º COPY –≤ Postgres.




## **(4)–ü—Ä–æ–≤–µ—Å—Ç–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ Postgres –∏ ClickHouse**

‚Äî –ù–∞–ø–∏—à–∏ 2‚Äì3 –∑–∞–ø—Ä–æ—Å–∞: —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º.

**Postgres**

```
-- –ú–µ—Ç–∞–¥–∞–Ω—ã–µ
student=# \d blog_feed
                                      Table "public.blog_feed"
   Column    |            Type             | Collation | Nullable |             Default              
-------------+-----------------------------+-----------+----------+----------------------------------
 id          | integer                     |           | not null | generated by default as identity
 ingested_at | timestamp without time zone |           |          | CURRENT_TIMESTAMP
 author      | text                        |           | not null | 
 content     | text                        |           | not null | 
Indexes:
    "blog_feed_pkey" PRIMARY KEY, btree (id)


-- –†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã
student=# \dt+ blog_feed
                                     List of relations
 Schema |   Name    | Type  |  Owner  | Persistence | Access method |  Size   | Description 
--------+-----------+-------+---------+-------------+---------------+---------+-------------
 public | blog_feed | table | student | permanent   | heap          | 1593 MB | 


-- –ü—Ä–æ—Å—Ç–æ–π Select count
student=# select count(0) from blog_feed;
  count  
---------
 9999995
(1 row)

Time: 5321,590 ms (00:05,322)

-- –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á—É
student=# select * from blog_feed where id=10000039;
    id    |        ingested_at         |   author    |                                      content                                      
----------+----------------------------+-------------+-----------------------------------------------------------------------------------
 10000039 | 2025-07-24 21:46:06.474004 | Andrew Mack | Last purpose trouble provide throughout school stuff me travel push result close.
(1 row)

Time: 22,626 ms

-- –ê–≥–≥—Ä–µ–≥–∞—Ü–∏—è
student=# select author,count(0) from blog_feed group by author order by 2;
      author                | count 
----------------------------+-------
 Bryce Hamilton             |     5
 Brandy Koch                |     5
 Bryce Gutierrez            |     5
 Bianca Brewer              |     5
 Bryce Gray                 |     5
 Anita Miles                |     5
 Angel Gaines               |     5
 Casey Arroyo               |     5
 Bryce Graham               |     5
 Carlos Baldwin             |     5
 Bethany Hardin             |     5
 Alyssa Kidd                |     5
.......
 Alexandria Pena            |     1
 Alison Logan               |     1
 Alexandria Pena MD         |     1
 Alison Lin MD              |     1
 Anne Carpenter PhD         |     1
 Andrew Brooks Jr.          |     1
 Alison Levine              |     1
 Alexandria Petersen        |     1
Time: 24577,850 ms (00:24,578)

-- –¥–ª—è Join-–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å –∏–º–µ–Ω–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
student=# CREATE TABLE author_names AS
SELECT SPLIT_PART(author, ' ', 1) AS first_name
	,COUNT(0)
FROM blog_feed
GROUP BY split_part(author, ' ', 1);
SELECT 695
Time: 9819,865 ms (00:09,820)

-- —á–µ—Ä–µ–∑ Join –£–∑–Ω–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª–Ω—ã–µ –∏–º–µ–Ω–∞ –∞–≤—Ç–æ—Ä–æ–≤ —Å –∏–º–µ–Ω–µ–º Angie
SELECT DISTINCT author
FROM blog_feed bf
INNER JOIN author_names an 
ON split_part(bf.author, ' ', 1) = an.first_name
AND an.first_name = 'Angie';
 Angie Yates
 Angie York
 Angie Young
 Angie Zavala
 Angie Zimmerman
 Angie Zimmerman DDS
(609 rows)
Time: 6108,193 ms (00:06,108)
```


**Clickhouse**

```
--- –°–æ–∑–¥–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω–æ –∏–¥–µ–Ω—Ç–∏—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –≤ ClickHouse –∫–∞–∫ –≤ PG
CREATE TABLE blog_feed ENGINE = MergeTree ()
ORDER BY id AS
SELECT *
FROM postgresql('studentsrv1:5432', 'student', 'blog_feed', 'student', 'student') pg
;
Ok.

-- –ú–µ—Ç–∞–¥–∞–Ω—ã–µ
localhost :) desc blog_feed
   ‚îå‚îÄname‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄtype‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄdefault_type‚îÄ‚î¨‚îÄdefault_expression‚îÄ‚î¨‚îÄcomment‚îÄ‚î¨‚îÄcodec_expression‚îÄ‚î¨‚îÄttl_expression‚îÄ‚îê
1. ‚îÇ id          ‚îÇ Int32                   ‚îÇ              ‚îÇ                    ‚îÇ         ‚îÇ                  ‚îÇ                ‚îÇ
2. ‚îÇ ingested_at ‚îÇ Nullable(DateTime64(6)) ‚îÇ              ‚îÇ                    ‚îÇ         ‚îÇ                  ‚îÇ                ‚îÇ
3. ‚îÇ author      ‚îÇ String                  ‚îÇ              ‚îÇ                    ‚îÇ         ‚îÇ                  ‚îÇ                ‚îÇ
4. ‚îÇ content     ‚îÇ String                  ‚îÇ              ‚îÇ                    ‚îÇ         ‚îÇ                  ‚îÇ                ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

-- –†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã
localhost :) SELECT table,
    formatReadableSize(sum(bytes)) as size,
    min(min_date) as min_date,
    max(max_date) as max_date
    FROM system.parts
    WHERE active
GROUP BY table;
Query id: 812a046d-f9b6-4bdd-8682-0a6f95347a8a
    ‚îå‚îÄtable‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄsize‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄmin_date‚îÄ‚î¨‚îÄ‚îÄ‚îÄmax_date‚îÄ‚îê
 5. ‚îÇ blog_feed               ‚îÇ 678.78 MiB ‚îÇ 1970-01-01 ‚îÇ 1970-01-01 ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

 
-- –ü—Ä–æ—Å—Ç–æ–π Select count
localhost :) select count(0) from blog_feed;
SELECT count(0)
FROM blog_feed
Query id: 154e2458-cc40-4360-8224-6b5ce39792e4
   ‚îå‚îÄcount(0)‚îÄ‚îê
1. ‚îÇ  9989999 ‚îÇ -- 9.99 million
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1 row in set. Elapsed: 0.013 sec. 


-- –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á—É
localhost :) select * from blog_feed where id=10000039;
SELECT *
FROM blog_feed
WHERE id = 10000039
Query id: 421ce508-2cf1-4c09-bb1f-758d5ef890bb
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄid‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄingested_at‚îÄ‚î¨‚îÄauthor‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄcontent‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1. ‚îÇ 10000039 ‚îÇ 2025-07-24 21:46:06.474004 ‚îÇ Andrew Mack ‚îÇ Last purpose trouble provide throughout school stuff me travel push result close. ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1 row in set. Elapsed: 0.048 sec. Processed 8.19 thousand rows, 38.46 KB (170.50 thousand rows/s., 800.37 KB/s.)
Peak memory usage: 774.13 KiB.


-- –ê–≥–≥—Ä–µ–≥–∞—Ü–∏—è
localhost :) select author,count(0) from blog_feed group by author order by 2;
765014. ‚îÇ Patricia Pittman    ‚îÇ       13 ‚îÇ
765015. ‚îÇ Aaron Barr          ‚îÇ       13 ‚îÇ
765016. ‚îÇ Brandi Daniels      ‚îÇ       13 ‚îÇ
765017. ‚îÇ Melanie Newman      ‚îÇ       13 ‚îÇ
765018. ‚îÇ Isaiah Moore        ‚îÇ       13 ‚îÇ
765019. ‚îÇ Glenn Flores        ‚îÇ       13 ‚îÇ
765020. ‚îÇ Brenda Serrano      ‚îÇ       13 ‚îÇ
765021. ‚îÇ Adam Kaiser         ‚îÇ       13 ‚îÇ
765022. ‚îÇ Craig Osborne       ‚îÇ       13 ‚îÇ
765023. ‚îÇ Cheryl Benson       ‚îÇ       13 ‚îÇ
765024. ‚îÇ Wayne Dunn          ‚îÇ       13 ‚îÇ
        ‚îî‚îÄauthor‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄcount(0)‚îÄ‚îò
Showed 1000 out of 923398 rows.

923398 rows in set. Elapsed: 2.386 sec. Processed 9.99 million rows, 222.53 MB (4.19 million rows/s., 93.25 MB/s.)
Peak memory usage: 146.13 MiB.


-- –¥–ª—è Join-–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å –∏–º–µ–Ω–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
CREATE TABLE author_names ENGINE = MergeTree ()
ORDER BY count
SETTINGS allow_nullable_key = 1
AS
SELECT *
FROM postgresql('studentsrv1:5432', 'student', 'author_names', 'student', 'student') pg
;

-- —á–µ—Ä–µ–∑ Join –£–∑–Ω–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª–Ω—ã–µ –∏–º–µ–Ω–∞ –∞–≤—Ç–æ—Ä–æ–≤ —Å –∏–º–µ–Ω–µ–º Angie
SELECT DISTINCT author
FROM (select author,  substringIndex(author, ' ', 1) AS  name from blog_feed) bf
INNER JOIN author_names an 
ON trim(bf.name) = trim(an.first_name)
AND an.first_name = 'Angie';
602. ‚îÇ Angie Case        ‚îÇ
603. ‚îÇ Angie Henson      ‚îÇ
604. ‚îÇ Angie Mclean DVM  ‚îÇ
605. ‚îÇ Angie Callahan    ‚îÇ
606. ‚îÇ Angie Potts       ‚îÇ
607. ‚îÇ Angie Mayo        ‚îÇ
608. ‚îÇ Angie Livingston  ‚îÇ
609. ‚îÇ Angie Atkins      ‚îÇ
     ‚îî‚îÄauthor‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

609 rows in set. Elapsed: 2.657 sec. Processed 9.99 million rows, 222.54 MB (3.76 million rows/s., 83.74 MB/s.)
Peak memory usage: 8.78 MiB.
```


‚Äî –°—Ä–∞–≤–Ω–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ PostgreSQL –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.

–°–æ–∑–¥–∞–ª —Ç–∞–±–ª–∏—Ü—É —Å–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º –Ω–∞–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–∞–∑—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
| TestCase | PG  | CH  |
|---|---|---|
|table size   |1593Mb   |  680Mb |
|select count   | 5.3s   | 0.01s  |
|select using id   | 22ms  | 0.04s  |
|select aggregate   | 24.5s  | 2.3s  |
|select join   | 6.1s  | 2.6s  |

–†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü –º–æ–∂–µ—Ç –Ω–µ —Ç–∞–∫–æ–π –±–æ–ª—å—à–æ–π, –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç. –ù–æ –æ–±—ä–µ–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ-—Ç—å. 


‚Äî –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π: –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤—Ä–µ–º—è, –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö, —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É—Å–ª–æ–≤–∏—è.

–§–∏–∫—Å–∏—Ä—É—é –ü–ª–∞–Ω—ã –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤—Ä–µ–º—è –∏ –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—É–Ω–∫—Ç–µ. –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –Ω–µ –æ–ø–∏—Å—ã–≤–∞—é, —Ç–∞–∫-–∫–∞–∫ –≤–∑—è–ª –æ–±–µ –±–∞–∑—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**Postgres**

```
student=# explain SELECT DISTINCT author
FROM blog_feed bf
INNER JOIN author_names an 
ON split_part(bf.author, ' ', 1) = an.first_name
AND an.first_name = 'Angie';
                                              QUERY PLAN                                               
-------------------------------------------------------------------------------------------------------
 Unique  (cost=268893.33..275479.48 rows=40359 width=14)
   ->  Nested Loop  (cost=268893.33..275354.48 rows=50001 width=14)
         ->  Gather Merge  (cost=268893.33..274716.77 rows=50001 width=14)
               Workers Planned: 2
               ->  Sort  (cost=267893.31..267945.39 rows=20834 width=14)
                     Sort Key: bf.author
                     ->  Parallel Seq Scan on blog_feed bf  (cost=0.00..266398.82 rows=20834 width=14)
                           Filter: (split_part(author, ' '::text, 1) = 'Angie'::text)
         ->  Materialize  (cost=0.00..12.69 rows=1 width=6)
               ->  Seq Scan on author_names an  (cost=0.00..12.69 rows=1 width=6)
                     Filter: (first_name = 'Angie'::text)
 JIT:
   Functions: 10
   Options: Inlining false, Optimization false, Expressions true, Deforming true
(14 rows)
```

**Clickhouse**

```
localhost :) EXPLAIN PLAN SELECT DISTINCT author
FROM (select author,  substringIndex(author, ' ', 1) AS  name from blog_feed) bf
INNER JOIN author_names an 
ON trim(bf.name) = trim(an.first_name)
AND an.first_name = 'Angie';

EXPLAIN
SELECT DISTINCT author
FROM
(
    SELECT
        author,
        substringIndex(author, ' ', 1) AS name
    FROM blog_feed
) AS bf
INNER JOIN author_names AS an ON (trimBoth(bf.name) = trimBoth(an.first_name)) AND (an.first_name = 'Angie')

Query id: f312d64a-fe8a-49a8-9ecd-945f19d7c89d

    ‚îå‚îÄexplain‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
 1. ‚îÇ Expression (Project names)                                                                                                                          ‚îÇ
 2. ‚îÇ   Distinct (DISTINCT)                                                                                                                               ‚îÇ
 3. ‚îÇ     Distinct (Preliminary DISTINCT)                                                                                                                 ‚îÇ
 4. ‚îÇ       Expression (Projection)                                                                                                                       ‚îÇ
 5. ‚îÇ         Expression                                                                                                                                  ‚îÇ
 6. ‚îÇ           Join                                                                                                                                      ‚îÇ
 7. ‚îÇ             Expression                                                                                                                              ‚îÇ
 8. ‚îÇ               Expression ((Change column names to column identifiers + (Project names + (Projection + Change column names to column identifiers)))) ‚îÇ
 9. ‚îÇ                 ReadFromMergeTree (default.blog_feed)                                                                                               ‚îÇ
10. ‚îÇ             Filter (Join filter)                                                                                                                    ‚îÇ
11. ‚îÇ               Expression (Change column names to column identifiers)                                                                                ‚îÇ
12. ‚îÇ                 ReadFromMergeTree (default.author_names)                                                                                            ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```





## **(5)–û–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å**

‚Äî –ß—Ç–æ –≤—ã–±–∏—Ä–∞–ª –∏ –ø–æ—á–µ–º—É

--- –í—ã–±—Ä–∞–ª Postgres –∏ ClickHouse, —á—Ç–æ–±—ã –ø—Ä–æ–∫–∞—á–∞—Ç—å—Å—è –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –ø–æ–ø—Ä–∏—â–µ OLAP.
–ü–æ–∫–∞–∑–∞–ª–æ—Å—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º —Å—Ä–∞–≤–Ω–∏—Ç—å –æ–±–µ –ë–î –Ω–∞ —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —Å–≤–æ–µ–º –∂–µ–ª–µ–∑–µ. 

‚Äî –ö–∞–∫–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–±–æ–≤–∞–ª

--- –î–ª—è Postgres COPY, Insert –∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã. COPY –¥–ª—è Postgres –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Å—Ç—ã–º –∏ —É–¥–æ–±–Ω—ã–º –∏ –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–º –±–æ–ª—å-–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–µ–π –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö.
–ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö(–æ—á–µ–Ω—å –Ω–µ—á–∞—Å—Ç—ã—Ö) –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—Ç–∏–ª–∏—Ç–∞–º–∏ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–∞ timescaledb-parallel-copy –∏ pg_bulkload.

–í ClickHouse –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ CSV —á–µ—Ä–µ–∑ clickhouse-client —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, –Ω–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CSV —Ñ–∞–π–ª—ã —Å —Ä–∞–∑–º–µ—Ä–æ–º –Ω–µ –±–æ–ª–µ–µ 1–º —Å—Ç—Ä–æ–∫(–≤ –º–æ–µ–º —Å–ª—É—á–∞–µ).

ClickHouse –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ. 

‚Äî –° –∫–∞–∫–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è

--- –í ClickHouse –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –±–æ–ª—å—à–æ–π CSV(10m —Å—Ç—Ä–æ–∫) –ø–æ–ø–∞–ª –ø–æ–¥ –æ—à–∏–±–∫—É MEMORY_LIMIT_EXCEEDED. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–º–∏ –∫—É—Å–∫–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å —à–µ–ª –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –±–µ–∑ –æ—à–∏–±–æ–∫. 

‚Äî –ß—Ç–æ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å —É–¥–æ–±–Ω—ã–º, –∞ —á—Ç–æ –Ω–µ—Ç

--- –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—Å—ã –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV –≤ Postgres(copy) –∏ ClickHouse(insert into table form csv_file) –ø–æ–∫–∞–∑–∞–ª–∏—Å—å –ø—Ä–æ—Å—Ç—ã–º–∏, —É–¥–æ–±–Ω—ã–º–∏ –∏ –±—ã—Å—Ç—Ä—ã–º–∏ –¥–∞–∂–µ –Ω–∞ –±–∞–∑–∞—Ö —Å 
–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. 

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–æ–ª—å—à–æ–≥–æ CSV —Ñ–∞–π–ª–∞ –≤ CH –ø–æ–π–º–∞–ª –æ—à–∏–±–∫—É, –¥–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å –æ–∫–æ–ª–æ 7.5m –∏–∑ 10. –û–∂–∏–¥–∞–ª —á—Ç–æ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≤—Å–µ –∏–ª–∏ –Ω–∏—á–µ–≥–æ - ACID. –ü–æ—Ö–æ–∂–µ, –¥–ª—è CH —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞. 

## **(6) üìé–ß—Ç–æ —Å–¥–∞–≤–∞—Ç—å**

üìÑ –û—Ç—á—ë—Ç (pdf, md –∏–ª–∏ jupyter) —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏, –ª–æ–≥–∞–º–∏, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
**–í—Å–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é –≤ MD —Ñ–æ—Ä–º–∞—Ç–µ**
üíª –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ ‚Äî —Å–∫—Ä–∏–ø—Ç—ã –∏–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
**–í—Å–µ —Å—Å—ã–ª–∫–∏ —É–∂–µ –≤ —É–∫–∞–∑–∞–Ω—ã –≤ –∫–∞–∂–¥–æ–º —à–∞–≥–µ**
